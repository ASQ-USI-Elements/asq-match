<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../../asq-base/asq-base.html">
<link rel="import" href="./asq-object.html">


<!--
......

##### Example
    <asq-bucket>b1</asq-bucket>

@element asq-bucket
@group ASQ Elements
@blurb ...
@homepage http://github.com/ASQ_USI/asq-bucket
-->
<polymer-element name="asq-bucket" attributes="name">
  <template>
    <style>
      :host {
        display: block;
      }

      section {
        display: flex;
        flex-direction: column;
        justify-content: space-around;
        align-items: center;
        align-content: center;
      }

    </style>
    <section>
      <div id="textContainer"><content></content></div>
      <div id="itemsContainer"></div>
    </section>
  </template>
  <script>
    (function() {

      var p = {
        reset: function() {
          var node = this.$.itemsContainer;
          while(node.firstChild){
            node.removeChild(node.firstChild)
          }
        },
       
        created: function() {
          this.addEventListener('click', this.onTap);
        },

        onTap: function(event) {
          this.fire('asq-bucket-tap', this);
        },

      
        add: function(obj) {
          this.$.itemsContainer.appendChild(obj);
          this.removeEventListener('click', this.onTap);
          // this.$.textContainer.style.visibility = 'hidden';
        },

        contains: function(obj) {
          var existed = false;
          this.$.itemsContainer.childNodes.array().forEach(function(e) {
            if ( e.name == obj.name ) {
              existed = true;
            }
          })
          return existed;
        }

      }

      ASQ.asqify(p);
      Polymer('asq-bucket', p);
    })()
    
  </script>
</polymer-element>
